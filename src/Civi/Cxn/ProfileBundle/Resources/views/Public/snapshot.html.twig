{% extends 'base.html.twig' %}

{% block title %}{% trans %}Site Snapshot{% endtrans %} ({{ snapshot.pubId }}){% endblock %}
{% block stylesheets %}
    <link href="{{ asset('bundles/civicxnprofile/profile.css') }}" type="text/css" rel="stylesheet"/>
    {# Hacks for navbar #}
    <style>
        body { padding-top: 50px; }
        .anchor {
            display: block;
            position: relative;
            top: -55px;
            visibility: hidden;
        }
    </style>
{% endblock %}

{% block body %}
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <span class="navbar-brand" href="#">Site Snapshot</span>
            </div>

            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#civicrm">CiviCRM</a></li>
                    <li>
                        <a href="#cms">
                            {% if snapshot.data.values.0.cms.type is defined %}{{ snapshot.data.values.0.cms.type }}{% else %}CMS{% endif %}
                        </a>
                    </li>
                    <li><a href="#mysql">MySQL</a></li>
                    <li><a href="#php">PHP</a></li>
                    {% if snapshot.data.values.0.http is defined %}
                        <li><a href="#http">HTTP</a></li>
                    {% endif %}
                    {% if snapshot.data.values.0.os is defined %}
                        <li><a href="#os">OS</a></li>
                    {% endif %}
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <div>
        <small class="text-muted"><label>{% trans %}ID{% endtrans %}:</label> {{ snapshot.pubId }}</small>
        <small class="text-muted"><label>{% trans %}Time{% endtrans %}:</label> {{ snapshot.timestamp | date }}
        </small>
    </div>

    {#
      Note: We want to display an anonymized version of systemInfo, and there may be some
      fields with identifying information. There, we don't blindly dump everything to the
      screen. Instead, display a set of curated fields.
    #}

    {% from "CiviCxnProfileBundle:Public:system_summary.html.twig" import system_summary %}
    {{ system_summary(snapshot.data.values.0) }}

{% endblock %}
